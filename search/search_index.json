{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"raSCSI NAT-less wifi Tutorial for setting up raSCSI to connect over wifi without requiring NAT For repository of these instructions see github rascsiwifi Steps Write Raspberry Pi Lite image to SD card Install rascsi with easyinstall instructions Use the web interface to install and mount *.hda drive image Switch over to systemd-networkd for general networking Set up Proxy ARP with Subnetting Create rasci_bridge files in /etc/systemd/network directory Mount Danaport thru commandline On the mac, config TCP/IP control panel","title":"Home"},{"location":"#rascsi-nat-less-wifi","text":"Tutorial for setting up raSCSI to connect over wifi without requiring NAT For repository of these instructions see github rascsiwifi","title":"raSCSI NAT-less wifi"},{"location":"#steps","text":"Write Raspberry Pi Lite image to SD card Install rascsi with easyinstall instructions Use the web interface to install and mount *.hda drive image Switch over to systemd-networkd for general networking Set up Proxy ARP with Subnetting Create rasci_bridge files in /etc/systemd/network directory Mount Danaport thru commandline On the mac, config TCP/IP control panel","title":"Steps"},{"location":"danaport/","text":"Mount Danaport using commandline. For some reason attaching the Danaport through the web interface returns an error. sudo rasctl -i 5 -c attach -t scdp -f eth0:192.168.3.0/24 Verify ~/.config/rascsi/default.json file { \"version\": \"22.7.2\", \"devices\": [ { \"id\": 4, \"unit\": 0, \"device_type\": \"SCDP\", \"image\": null, \"params\": { \"inet\": \"192.168.3.0/24\", \"interface\": \"eth0\" }, \"vendor\": \"Dayna\", \"product\": \"SCSI/Link\", \"revision\": \"1.4a\", \"block_size\": null, \"size\": 0 }, { \"id\": 6, \"unit\": 0, \"device_type\": \"SCHD\", \"image\": \"/home/pi/images/HD0-OpenRetroSCSI-7.5.3.hda\", \"params\": {}, \"vendor\": \"QUANTUM\", \"product\": \"FIREBALL\", \"revision\": \"2207\", \"block_size\": 512, \"size\": 524288000 } ], \"reserved_ids\": [ { \"id\": \"7\", \"memo\": \"\" } ] } Confirm ras0 bridge is present. Will show up as 'degraded' and 'unmanaged' but actually works networkctl IDX LINK TYPE OPERATIONAL SETUP 1 lo loopback carrier unmanaged 2 eth0 ether no-carrier configuring 3 rascsi_bridge bridge degraded-carrier configured 4 wlan0 wlan routable configured 6 ras0 ether degraded unmanaged brctl show bridge name bridge id STP enabled interfaces rascsi_bridge 8000.36873c9d0b82 no eth0 ras0","title":"Danaport"},{"location":"danaport/#mount-danaport","text":"using commandline. For some reason attaching the Danaport through the web interface returns an error.","title":"Mount Danaport"},{"location":"danaport/#_1","text":"sudo rasctl -i 5 -c attach -t scdp -f eth0:192.168.3.0/24","title":""},{"location":"danaport/#verify-configrascsidefaultjson-file","text":"{ \"version\": \"22.7.2\", \"devices\": [ { \"id\": 4, \"unit\": 0, \"device_type\": \"SCDP\", \"image\": null, \"params\": { \"inet\": \"192.168.3.0/24\", \"interface\": \"eth0\" }, \"vendor\": \"Dayna\", \"product\": \"SCSI/Link\", \"revision\": \"1.4a\", \"block_size\": null, \"size\": 0 }, { \"id\": 6, \"unit\": 0, \"device_type\": \"SCHD\", \"image\": \"/home/pi/images/HD0-OpenRetroSCSI-7.5.3.hda\", \"params\": {}, \"vendor\": \"QUANTUM\", \"product\": \"FIREBALL\", \"revision\": \"2207\", \"block_size\": 512, \"size\": 524288000 } ], \"reserved_ids\": [ { \"id\": \"7\", \"memo\": \"\" } ] }","title":"Verify ~/.config/rascsi/default.json file"},{"location":"danaport/#confirm-ras0-bridge-is-present-will-show-up-as-degraded-and-unmanaged-but-actually-works","text":"networkctl IDX LINK TYPE OPERATIONAL SETUP 1 lo loopback carrier unmanaged 2 eth0 ether no-carrier configuring 3 rascsi_bridge bridge degraded-carrier configured 4 wlan0 wlan routable configured 6 ras0 ether degraded unmanaged brctl show bridge name bridge id STP enabled interfaces rascsi_bridge 8000.36873c9d0b82 no eth0 ras0","title":"Confirm ras0 bridge is present.  Will show up as 'degraded' and 'unmanaged' but actually works"},{"location":"hdaimage/","text":"Mount HDA Image using web interface Upload then mount hard drive image","title":"Mount hda image"},{"location":"hdaimage/#mount-hda-image","text":"using web interface","title":"Mount HDA Image"},{"location":"hdaimage/#_1","text":"","title":""},{"location":"hdaimage/#upload-then-mount-hard-drive-image","text":"","title":"Upload then mount hard drive image"},{"location":"proxyarp/","text":"Setup Proxy ARP with Subnetting below instructions were modified from this website Configure the WiFi client connection Create this file for wpa_supplicant with your settings for country= , ssid= and psk= : sudo -Es # if not already done cat > /etc/wpa_supplicant/wpa_supplicant-wlan0.conf <<EOF country=US ctrl_interface=DIR=/run/wpa_supplicant GROUP=netdev update_config=1 network={ ssid=\"TestNet\" psk=\"testingPassword\" } EOF chmod 600 /etc/wpa_supplicant/wpa_supplicant-wlan0.conf systemctl disable wpa_supplicant.service systemctl enable wpa_supplicant@wlan0.service rfkill unblock 0 Enable promiscuous mode on wlan0 to see broadcasts on both subnets. sudo systemctl edit wpa_supplicant@wlan0.service ### Editing /etc/systemd/system/wpa_supplicant@wlan0.service.d/override.conf ### Anything between here and the comment below will become the new contents of the file [Service] ExecStartPre=/sbin/ip link set %i promisc on ExecStopPost=/sbin/ip link set %i promisc off ### Lines below this comment will be discarded ### /lib/systemd/system/wpa_supplicant@.service # [Unit] # Description=WPA supplicant daemon (interface-specific version) # Requires=sys-subsystem-net-devices-%i.device # After=sys-subsystem-net-devices-%i.device # Before=network.target # Wants=network.target # # # NetworkManager users will probably want the dbus version instead. # # [Service] # Type=simple # ExecStart=/sbin/wpa_supplicant -c/etc/wpa_supplicant/wpa_supplicant-%I.conf -Dnl80211,wext -i%I # # [Install] # Alias=multi-user.target.wants/wpa_supplicant@%i.service Edit files in /etc/systemd/network directory For 04-wired.network These addresses must be part of the same subnet but outside the dhcp range of your router. In the below example, the wifi router's dhcp range is 100-149 so 241-255 is chosen for the rascsi's subnet. The pi will be given address 192.168.3.241 and the mac will be given an address from the range 242-255. [Match] Name=rascsi_bridge [Network] # Have attention to the bit mask at the end of the address Address=192.168.3.241/28 DHCPServer=yes [DHCPServer] DNS=84.200.69.80 1.1.1.1 For 08-wifi.network [Match] Name=wl* [Network] DHCP=yes IPForward=ipv4 IPv4ProxyARP=yes","title":"Proxy Arp"},{"location":"proxyarp/#setup-proxy-arp-with-subnetting","text":"below instructions were modified from this website","title":"Setup Proxy ARP with Subnetting"},{"location":"proxyarp/#configure-the-wifi-client-connection","text":"Create this file for wpa_supplicant with your settings for country= , ssid= and psk= : sudo -Es # if not already done cat > /etc/wpa_supplicant/wpa_supplicant-wlan0.conf <<EOF country=US ctrl_interface=DIR=/run/wpa_supplicant GROUP=netdev update_config=1 network={ ssid=\"TestNet\" psk=\"testingPassword\" } EOF chmod 600 /etc/wpa_supplicant/wpa_supplicant-wlan0.conf systemctl disable wpa_supplicant.service systemctl enable wpa_supplicant@wlan0.service rfkill unblock 0","title":"Configure the WiFi client connection"},{"location":"proxyarp/#enable-promiscuous-mode-on-wlan0-to-see-broadcasts-on-both-subnets","text":"sudo systemctl edit wpa_supplicant@wlan0.service ### Editing /etc/systemd/system/wpa_supplicant@wlan0.service.d/override.conf ### Anything between here and the comment below will become the new contents of the file [Service] ExecStartPre=/sbin/ip link set %i promisc on ExecStopPost=/sbin/ip link set %i promisc off ### Lines below this comment will be discarded ### /lib/systemd/system/wpa_supplicant@.service # [Unit] # Description=WPA supplicant daemon (interface-specific version) # Requires=sys-subsystem-net-devices-%i.device # After=sys-subsystem-net-devices-%i.device # Before=network.target # Wants=network.target # # # NetworkManager users will probably want the dbus version instead. # # [Service] # Type=simple # ExecStart=/sbin/wpa_supplicant -c/etc/wpa_supplicant/wpa_supplicant-%I.conf -Dnl80211,wext -i%I # # [Install] # Alias=multi-user.target.wants/wpa_supplicant@%i.service","title":"Enable promiscuous mode on wlan0 to see broadcasts on both subnets."},{"location":"proxyarp/#edit-files-in-etcsystemdnetwork-directory","text":"","title":"Edit files in /etc/systemd/network directory"},{"location":"proxyarp/#_1","text":"","title":""},{"location":"proxyarp/#for-04-wirednetwork","text":"These addresses must be part of the same subnet but outside the dhcp range of your router. In the below example, the wifi router's dhcp range is 100-149 so 241-255 is chosen for the rascsi's subnet. The pi will be given address 192.168.3.241 and the mac will be given an address from the range 242-255. [Match] Name=rascsi_bridge [Network] # Have attention to the bit mask at the end of the address Address=192.168.3.241/28 DHCPServer=yes [DHCPServer] DNS=84.200.69.80 1.1.1.1","title":"For 04-wired.network"},{"location":"proxyarp/#for-08-wifinetwork","text":"[Match] Name=wl* [Network] DHCP=yes IPForward=ipv4 IPv4ProxyARP=yes","title":"For 08-wifi.network"},{"location":"rascsi/","text":"raSCSI Install Follow the RASCSI setup instructions and ./easyinstall.sh Perform updates and add libraries sudo apt-get update && sudo apt-get install git libspdlog-dev protobuf-compiler libpcap-dev Clone the rascsi repository cd ~ git clone https://github.com/akuker/RASCSI.git Perform easy install for Full Spec board cd ~/RASCSI ./easyinstall.sh Or, if you have a STANDARD board cd ~/RASCSI ./easyinstall.sh -c=STANDARD Choose 1 Choose among the following options: INSTALL/UPDATE RASCSI (FULLSPEC version) 1) install or update RaSCSI Service + Web Interface 2) install or update RaSCSI Service 3) install or update RaSCSI OLED Screen (requires hardware) CREATE HFS FORMATTED (MAC) IMAGE WITH LIDO DRIVERS ** For the Mac Plus, it's better to create an image through the Web Interface ** 4) 600MB drive (suggested size) 5) custom drive size (up to 4000MB) NETWORK BRIDGE ASSISTANT 6) configure network bridge for Ethernet (DHCP) 7) configure network bridge for WiFi (static IP + NAT) INSTALL COMPANION APPS 8) install AppleShare File Server (Netatalk) 9) install Web Proxy Server (Macproxy) ADVANCED OPTIONS 10) compile and install RaSCSI stand-alone 11) configure the RaSCSI Web Interface stand-alone EXPERIMENTAL FEATURES 12) install or update RaSCSI Control Board UI (requires hardware) Enter your choice (0-12) or CTRL-C to exit: 1 Restart the syslog and configure systemd to start RaSCSI at boot sudo systemctl restart rsyslog sudo systemctl enable rascsi # optional - start rascsi at boot sudo systemctl start rascsi sudo systemctl status rascsi","title":"Install rascsi"},{"location":"rascsi/#rascsi-install","text":"","title":"raSCSI Install"},{"location":"rascsi/#_1","text":"Follow the RASCSI setup instructions and ./easyinstall.sh","title":"&nbsp;"},{"location":"rascsi/#perform-updates-and-add-libraries","text":"sudo apt-get update && sudo apt-get install git libspdlog-dev protobuf-compiler libpcap-dev","title":"Perform updates and add libraries"},{"location":"rascsi/#clone-the-rascsi-repository","text":"cd ~ git clone https://github.com/akuker/RASCSI.git","title":"Clone the rascsi repository"},{"location":"rascsi/#perform-easy-install-for-full-spec-board","text":"cd ~/RASCSI ./easyinstall.sh","title":"Perform easy install for Full Spec board"},{"location":"rascsi/#or-if-you-have-a-standard-board","text":"cd ~/RASCSI ./easyinstall.sh -c=STANDARD","title":"Or, if you have a STANDARD board"},{"location":"rascsi/#choose-1","text":"Choose among the following options: INSTALL/UPDATE RASCSI (FULLSPEC version) 1) install or update RaSCSI Service + Web Interface 2) install or update RaSCSI Service 3) install or update RaSCSI OLED Screen (requires hardware) CREATE HFS FORMATTED (MAC) IMAGE WITH LIDO DRIVERS ** For the Mac Plus, it's better to create an image through the Web Interface ** 4) 600MB drive (suggested size) 5) custom drive size (up to 4000MB) NETWORK BRIDGE ASSISTANT 6) configure network bridge for Ethernet (DHCP) 7) configure network bridge for WiFi (static IP + NAT) INSTALL COMPANION APPS 8) install AppleShare File Server (Netatalk) 9) install Web Proxy Server (Macproxy) ADVANCED OPTIONS 10) compile and install RaSCSI stand-alone 11) configure the RaSCSI Web Interface stand-alone EXPERIMENTAL FEATURES 12) install or update RaSCSI Control Board UI (requires hardware) Enter your choice (0-12) or CTRL-C to exit: 1","title":"Choose 1"},{"location":"rascsi/#restart-the-syslog-and-configure-systemd-to-start-rascsi-at-boot","text":"sudo systemctl restart rsyslog sudo systemctl enable rascsi # optional - start rascsi at boot sudo systemctl start rascsi sudo systemctl status rascsi","title":"Restart the syslog and configure systemd to start RaSCSI at boot"},{"location":"rascsibridge/","text":"Create Systemd bridge files in /etc/systemd/network 10-rascsi_bridge.netdev [NetDev] Name=rascsi_bridge Kind=bridge 11-rascsi_bridge.network This will also bridge the ethernet port to rascsi_bridge and will provide an ip address to a client [Match] Name=eth0 [Network] Bridge=rascsi_bridge Reboot raspberry pi","title":"Rasci bridge"},{"location":"rascsibridge/#create-systemd-bridge-files","text":"in /etc/systemd/network","title":"Create Systemd bridge files"},{"location":"rascsibridge/#10-rascsi_bridgenetdev","text":"[NetDev] Name=rascsi_bridge Kind=bridge","title":"10-rascsi_bridge.netdev"},{"location":"rascsibridge/#11-rascsi_bridgenetwork","text":"This will also bridge the ethernet port to rascsi_bridge and will provide an ip address to a client [Match] Name=eth0 [Network] Bridge=rascsi_bridge","title":"11-rascsi_bridge.network"},{"location":"rascsibridge/#reboot-raspberry-pi","text":"","title":"Reboot raspberry pi"},{"location":"raspios/","text":"Install Raspberry PI OS image on Raspberry Pi Follow Getting Started instructions on official raspberrypi.com website Strongly recommend using the Raspberry PI Imager and selecting \"Raspberry Pi OS Lite (32-bit)\" select \"Raspberry Pi OS (other)\" select \"Raspberry Pi OS Lite (32-bit)\" Launch Raspi-Config from raspberry pi terminal pi@raspberrypi:~$ sudo raspi-config System Options you may want to change Password and Hostname Interface Options enable SSH for remote access Localization Options Under Locale, use spacebar to deselect \"en_GB.UTF-8 UTF-8\" and select \"en_US.UTF-8 UTF-8 none Timezone US As we are favored enough to live in the The Republic of Texas Keyboard Generic 105-key PC (intl.) Other English (US) Scroll up to English (US) Default \"Enter\" the 2 screens then Finish Remote ssh login from PC terminal you can now remote login to your rascsi alex@xanadu_pc:~$ ssh pi@rascsi.local pi@rascsi:~$ Update and Upgrade sudo apt update sudo apt upgrade","title":"Raspi OS Image"},{"location":"raspios/#install-raspberry-pi-os-image","text":"on Raspberry Pi","title":"Install Raspberry PI OS image"},{"location":"raspios/#_1","text":"Follow Getting Started instructions on official raspberrypi.com website Strongly recommend using the Raspberry PI Imager and selecting \"Raspberry Pi OS Lite (32-bit)\" select \"Raspberry Pi OS (other)\" select \"Raspberry Pi OS Lite (32-bit)\"","title":"&nbsp;"},{"location":"raspios/#launch-raspi-config","text":"from raspberry pi terminal","title":"Launch Raspi-Config"},{"location":"raspios/#_2","text":"pi@raspberrypi:~$ sudo raspi-config","title":""},{"location":"raspios/#system-options","text":"you may want to change Password and Hostname","title":"System Options"},{"location":"raspios/#interface-options","text":"enable SSH for remote access","title":"Interface Options"},{"location":"raspios/#localization-options","text":"","title":"Localization Options"},{"location":"raspios/#_3","text":"Under Locale, use spacebar to deselect \"en_GB.UTF-8 UTF-8\" and select \"en_US.UTF-8 UTF-8 none Timezone US As we are favored enough to live in the The Republic of Texas Keyboard Generic 105-key PC (intl.) Other English (US) Scroll up to English (US) Default \"Enter\" the 2 screens then Finish","title":""},{"location":"raspios/#remote-ssh-login","text":"from PC terminal you can now remote login to your rascsi","title":"Remote ssh login"},{"location":"raspios/#_4","text":"alex@xanadu_pc:~$ ssh pi@rascsi.local pi@rascsi:~$","title":""},{"location":"raspios/#update-and-upgrade","text":"","title":"Update and Upgrade"},{"location":"raspios/#_5","text":"sudo apt update sudo apt upgrade","title":""},{"location":"sysdnetd/","text":"SystemD-NetworkD transition Switch over to systemd-networkd for general networking Follow Quick Step instructions go to website # deinstall classic networking pi@raspberrypi:~ $ sudo -Es # if not already done root@raspberrypi:~ # systemctl daemon-reload root@raspberrypi:~ # systemctl disable --now ifupdown dhcpcd dhcpcd5 isc-dhcp-client isc-dhcp-common rsyslog root@raspberrypi:~ # apt --autoremove purge ifupdown dhcpcd dhcpcd5 isc-dhcp-client isc-dhcp-common rsyslog root@raspberrypi:~ # rm -r /etc/network /etc/dhcp # setup/enable systemd-resolved and systemd-networkd root@raspberrypi:~ # systemctl disable --now avahi-daemon libnss-mdns root@raspberrypi:~ # apt --autoremove purge avahi-daemon root@raspberrypi:~ # apt install libnss-resolve root@raspberrypi:~ # ln -sf /run/systemd/resolve/stub-resolv.conf /etc/resolv.conf root@raspberrypi:~ # apt-mark hold avahi-daemon dhcpcd dhcpcd5 ifupdown isc-dhcp-client isc-dhcp-common libnss-mdns openresolv raspberrypi-net-mods rsyslog root@raspberrypi:~ # systemctl enable systemd-networkd.service systemd-resolved.service root@raspberrypi:~ # exit pi@raspberrypi:~ $","title":"Systemd-networkd"},{"location":"sysdnetd/#systemd-networkd-transition","text":"Switch over to systemd-networkd for general networking","title":"SystemD-NetworkD transition"},{"location":"sysdnetd/#_1","text":"","title":""},{"location":"sysdnetd/#follow-quick-step-instructions","text":"go to website # deinstall classic networking pi@raspberrypi:~ $ sudo -Es # if not already done root@raspberrypi:~ # systemctl daemon-reload root@raspberrypi:~ # systemctl disable --now ifupdown dhcpcd dhcpcd5 isc-dhcp-client isc-dhcp-common rsyslog root@raspberrypi:~ # apt --autoremove purge ifupdown dhcpcd dhcpcd5 isc-dhcp-client isc-dhcp-common rsyslog root@raspberrypi:~ # rm -r /etc/network /etc/dhcp # setup/enable systemd-resolved and systemd-networkd root@raspberrypi:~ # systemctl disable --now avahi-daemon libnss-mdns root@raspberrypi:~ # apt --autoremove purge avahi-daemon root@raspberrypi:~ # apt install libnss-resolve root@raspberrypi:~ # ln -sf /run/systemd/resolve/stub-resolv.conf /etc/resolv.conf root@raspberrypi:~ # apt-mark hold avahi-daemon dhcpcd dhcpcd5 ifupdown isc-dhcp-client isc-dhcp-common libnss-mdns openresolv raspberrypi-net-mods rsyslog root@raspberrypi:~ # systemctl enable systemd-networkd.service systemd-resolved.service root@raspberrypi:~ # exit pi@raspberrypi:~ $","title":"Follow Quick Step instructions"},{"location":"tcpip/","text":"TCP/IP Config in the macintosh TCP/IP control panel Select DHCP If problems getting an address, you may have to use a static IP. Make sure it is outside your router's DHCP range. 192.168.3.242 or greater should work Test your internet connection with OTT tool by pinging 8.8.8.8","title":"TCP/IP"},{"location":"tcpip/#tcpip-config","text":"in the macintosh TCP/IP control panel","title":"TCP/IP Config"},{"location":"tcpip/#select-dhcp","text":"","title":"Select DHCP"},{"location":"tcpip/#if-problems-getting-an-address-you-may-have-to-use-a-static-ip-make-sure-it-is-outside-your-routers-dhcp-range-1921683242-or-greater-should-work","text":"","title":"If problems getting an address, you may have to use a static IP.  Make sure it is outside your router's DHCP range. 192.168.3.242 or greater should work"},{"location":"tcpip/#test-your-internet-connection-with-ott-tool-by-pinging-8888","text":"","title":"Test your internet connection with OTT tool by pinging 8.8.8.8"}]}